import React from 'react';

import './Grid.sass';

class Cell extends React.Component {

    render() {
        if (this.props.editable)
            return <input value={this.props.value} onChange={(evt) => this.props.onChange(evt.target.value)}/>;
        return <b>{this.props.value}</b>;
    }
}


export default class Grid extends React.Component {

    render() {
        return (
            <div className="gwcGrid">
                <table>
                    <tbody>
                    {this.props.data.map((row, r) =>
                        <tr key={row.key}>
                            {
                                row.values.map((val, c) =>
                                    <td key={c}>
                                        <Cell
                                            value={val}
                                            editable={row.editable[c]}
                                            onChange={(val) => this.props.onChange(row.key, c, val)}
                                        />
                                    </td>
                                )
                            }
                            {this.props.onDeleteRow && <th>
                                <span onClick={() => this.props.onDeleteRow(row.key)}>-</span>
                            </th>}
                        </tr>
                    )}
                    </tbody>
                    {this.props.onAddRow && <tbody>
                    <tr>
                        <th>
                            <span onClick={() => this.props.onAddRow()}>+</span>
                        </th>
                    </tr>
                    </tbody>}
                </table>
            </div>
        )
    }
}
