let _subs = [];

export function subscribe(msg, target, fn) {
    _subs.push([msg, target, fn]);
}


export function publish(msg, ...args) {
    for (let [m, _, fn] of _subs) {
        if(m === msg) {
            /*global setTimeout*/
            setTimeout(function () {
                fn(...args)
            }, 0);
        }
    }
}

export function unsubscribe(obj) {
    _subs = _subs.filter(t => t[1] !== obj);
}
