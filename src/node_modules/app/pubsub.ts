let _subs = [];

export function subscribe(msg: string, target: Object, fn: any) {
    _subs.push([msg, target, fn]);
}


export function publish(msg: string, ...args) {
    for (let [m, _, fn] of _subs) {
        if(m === msg)
            setTimeout(function () {
                fn(...args)
            }, 0);
    }
}

export function unsubscribe(obj: Object) {
    _subs = _subs.filter(t => t[1] !== obj);
}
